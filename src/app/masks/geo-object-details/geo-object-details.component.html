<h1 *ngIf="editMode">Modifica Elemento di Rete</h1>
<h1 *ngIf="!editMode">Creazione nuovo Elemento di Rete</h1>

<form [formGroup]="geoObjectForm" novalidate>

<mat-card *ngIf="data">
	<mat-card-content>
		<input type="hidden" name="id">
		<div class="row">
			<div class="col" class="full-width">
				<pmf-input-element [form]="geoObjectForm" name="code" label="Codice"></pmf-input-element>
			</div>
		</div>
		<div class="row">
			<div class="col" class="full-width">
				<pmf-input-element [form]="geoObjectForm" name="description" label="Descrizione"></pmf-input-element>
			</div>
		</div>
		<div class="row">
			<div class="col" class="full-width">
				<pmf-input-element [form]="geoObjectForm" name="version" label="Versione"></pmf-input-element>
			</div>
		</div>
	</mat-card-content>

	<mat-accordion>
		<div *ngFor="let comp of relationsControls(); let i=index" formArrayName="relations">
		<mat-expansion-panel class="row" [formGroupName]="i" class="relation">
			<mat-expansion-panel-header>
				<mat-panel-title><strong>{{relationsFormGroup(i).controls['order']?.value}} - {{relationsFormGroup(i).controls['relationType']?.value}}: {{relationsFormGroup(i).controls['mask']?.value?.description}}</strong></mat-panel-title>			
				<mat-icon class="delete-button" (click)="removeRelation(i, $event)">remove_circle</mat-icon>
			</mat-expansion-panel-header>
			<input type="hidden" name="id"> 
			<div class="row" class="full-width">
				<div class="row">
					<div class="col" class="full-width">
						<pmf-input-element [form]="comp" name="order" label="Ordine" type="number"></pmf-input-element>
					</div>
				</div>
				<div class="row">
					<div class="col" class="full-width">
						<pmf-select-element [form]="comp" name="relationType" label="Tipologia" [options]="maskRelationTypes" view="infoValue" get="infoValue"></pmf-select-element>
					</div>
				</div>
					<div class="row">
						<div class="col" class="full-width">
						<pmf-autocomplete-element [form]="comp" name="mask" label="Maschera" [options]="maskRefs" view="description"></pmf-autocomplete-element>
					</div>
				</div>            
			</div>
		</mat-expansion-panel>
		</div>
	</mat-accordion>

	<mat-card-content>
		<mat-card-actions>
			<button mat-raised-button color="primary" type="button" (click)="addRelation()">Aggiungi Maschera</button>
			<button mat-raised-button color="primary" type="button" (click)="onSubmit()">Salva</button>
		</mat-card-actions>

	</mat-card-content>
</mat-card>

</form>
